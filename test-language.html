<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test Language System with Auto Translation</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-slate-900 text-white p-8">
    <h1 class="text-3xl font-bold mb-6">ğŸŒ Test Há»‡ Thá»‘ng Dá»‹ch Tá»± Äá»™ng</h1>

    <div class="mb-6 p-4 bg-blue-900 rounded-lg">
      <h2 class="text-lg font-bold mb-2">Chá»n ngÃ´n ngá»¯:</h2>
      <div class="flex gap-2">
        <button id="testVi" class="px-4 py-2 bg-blue-600 rounded mr-2">
          ğŸ‡»ğŸ‡³ Tiáº¿ng Viá»‡t
        </button>
        <button id="testEn" class="px-4 py-2 bg-green-600 rounded mr-2">
          ğŸ‡ºğŸ‡¸ English
        </button>
        <button id="testZh" class="px-4 py-2 bg-red-600 rounded">
          ğŸ‡¨ğŸ‡³ ä¸­æ–‡
        </button>
      </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div class="bg-slate-800 p-4 rounded-lg">
        <h3 class="text-lg font-bold mb-4">ğŸ”¤ Báº£n dá»‹ch UI:</h3>
        <div class="space-y-2">
          <p>
            TiÃªu Ä‘á» á»©ng dá»¥ng:
            <span class="text-cyan-300" id="appTitle" data-translate="appTitle"
              >Loading...</span
            >
          </p>
          <p>
            Game 5vs5:
            <span class="text-green-300" id="game5vs5" data-translate="game5vs5"
              >Loading...</span
            >
          </p>
          <p>
            ThÃªm tÆ°á»›ng:
            <span
              class="text-yellow-300"
              id="addChampion"
              data-translate="addChampion"
              >Loading...</span
            >
          </p>
          <p>
            Ká»¹ nÄƒng:
            <span class="text-purple-300" id="skills" data-translate="skills"
              >Loading...</span
            >
          </p>
          <p>
            TÃªn Ä‘áº§y Ä‘á»§:
            <span class="text-pink-300" id="fullName" data-translate="fullName"
              >Loading...</span
            >
          </p>
        </div>
      </div>

      <div class="bg-slate-800 p-4 rounded-lg">
        <h3 class="text-lg font-bold mb-4">ğŸ­ Test Dá»‹ch Champion:</h3>
        <div id="championTest">
          <p><strong>TÃªn:</strong> <span id="championName">Thresh</span></p>
          <p><strong>Vai trÃ²:</strong> <span id="championRole">Há»— Trá»£</span></p>
          <p>
            <strong>Lore:</strong>
            <span id="championLore"
              >ÄÆ°á»£c gá»i lÃ  Káº» Canh GÃ¡c XÃ­ch Xen, Thresh lÃ  má»™t linh há»“n Ä‘á»™c Ã¡c
              tá»« Quáº§n Äáº£o BÃ³ng ÄÃªm.</span
            >
          </p>
          <div class="mt-3">
            <strong>Ká»¹ nÄƒng:</strong>
            <ul id="championSkills" class="list-disc list-inside mt-2">
              <li>Death Sentence: NÃ©m mÃ³c cÃ¢u Ä‘á»ƒ kÃ©o káº» thÃ¹</li>
              <li>Dark Passage: Táº¡o lá»“ng Ä‘Ã¨n Ä‘á»ƒ Ä‘á»“ng minh dá»‹ch chuyá»ƒn</li>
              <li>Flay: QuÃ©t xÃ­ch Ä‘á»ƒ Ä‘áº©y lÃ¹i káº» thÃ¹</li>
              <li>The Box: Táº¡o há»™p tÃ¹ lÃ m cháº­m káº» thÃ¹</li>
            </ul>
          </div>
        </div>
        <button
          id="translateChampion"
          class="mt-4 px-4 py-2 bg-purple-600 rounded hover:bg-purple-700"
        >
          ğŸŒ Dá»‹ch Champion
        </button>
      </div>
    </div>

    <div class="mt-6 p-4 bg-yellow-900 rounded-lg">
      <h3 class="text-lg font-bold mb-2">ğŸ“Š Thá»‘ng kÃª Cache:</h3>
      <div id="cacheStats" class="text-sm">
        <p>Sá»‘ má»¥c trong cache: <span id="cacheSize">0</span></p>
        <p>Dung lÆ°á»£ng cache: <span id="cacheMemory">0 KB</span></p>
      </div>
      <button
        id="clearCache"
        class="mt-2 px-3 py-1 bg-red-600 rounded hover:bg-red-700 text-sm"
      >
        ğŸ—‘ï¸ XÃ³a Cache
      </button>
    </div>

    <div
      id="loadingIndicator"
      class="fixed top-4 right-4 bg-blue-600 text-white px-4 py-2 rounded-lg hidden"
    >
      ğŸŒ Äang dá»‹ch...
    </div>

    <script src="js/translation-service.js"></script>
    <script src="js/languages.js"></script>
    <script>
      const languageManager = new LanguageManager();
      const translationService = new TranslationService();

      // Sample champion data for testing
      const sampleChampion = {
        name: "Thresh",
        role: "Há»— Trá»£",
        lore: "ÄÆ°á»£c gá»i lÃ  Káº» Canh GÃ¡c XÃ­ch Xen, Thresh lÃ  má»™t linh há»“n Ä‘á»™c Ã¡c tá»« Quáº§n Äáº£o BÃ³ng ÄÃªm.",
        skills: [
          "Death Sentence: NÃ©m mÃ³c cÃ¢u Ä‘á»ƒ kÃ©o káº» thÃ¹",
          "Dark Passage: Táº¡o lá»“ng Ä‘Ã¨n Ä‘á»ƒ Ä‘á»“ng minh dá»‹ch chuyá»ƒn",
          "Flay: QuÃ©t xÃ­ch Ä‘á»ƒ Ä‘áº©y lÃ¹i káº» thÃ¹",
          "The Box: Táº¡o há»™p tÃ¹ lÃ m cháº­m káº» thÃ¹",
        ],
      };

      // Update cache stats
      function updateCacheStats() {
        const stats = translationService.getCacheStats();
        document.getElementById("cacheSize").textContent = stats.size;
        document.getElementById("cacheMemory").textContent =
          Math.round(stats.memoryUsage / 1024) + " KB";
      }

      // Show loading indicator
      function showLoading(show) {
        const indicator = document.getElementById("loadingIndicator");
        if (show) {
          indicator.classList.remove("hidden");
        } else {
          indicator.classList.add("hidden");
        }
      }

      // Language change handlers
      document.getElementById("testVi").addEventListener("click", async () => {
        showLoading(true);
        await languageManager.changeLanguage("vi");
        showLoading(false);
        updateCacheStats();
      });

      document.getElementById("testEn").addEventListener("click", async () => {
        showLoading(true);
        await languageManager.changeLanguage("en");
        showLoading(false);
        updateCacheStats();
      });

      document.getElementById("testZh").addEventListener("click", async () => {
        showLoading(true);
        await languageManager.changeLanguage("zh");
        showLoading(false);
        updateCacheStats();
      });

      // Champion translation test
      document
        .getElementById("translateChampion")
        .addEventListener("click", async () => {
          const currentLang = languageManager.getCurrentLanguage();
          if (currentLang === "vi") {
            alert("HÃ£y chá»n ngÃ´n ngá»¯ khÃ¡c Ä‘á»ƒ test dá»‹ch champion!");
            return;
          }

          showLoading(true);

          try {
            const translatedChampion =
              await translationService.translateChampion(
                sampleChampion,
                currentLang
              );

            document.getElementById("championName").textContent =
              translatedChampion.name;
            document.getElementById("championRole").textContent =
              translatedChampion.role;
            document.getElementById("championLore").textContent =
              translatedChampion.lore;

            const skillsList = document.getElementById("championSkills");
            skillsList.innerHTML = "";
            translatedChampion.skills.forEach((skill) => {
              const li = document.createElement("li");
              li.textContent = skill;
              skillsList.appendChild(li);
            });

            updateCacheStats();
          } catch (error) {
            console.error("Translation error:", error);
            alert("Lá»—i khi dá»‹ch: " + error.message);
          }

          showLoading(false);
        });

      // Clear cache
      document.getElementById("clearCache").addEventListener("click", () => {
        translationService.clearCache();
        updateCacheStats();
        alert("ÄÃ£ xÃ³a cache!");
      });

      // Initial load
      languageManager.updateContent();
      updateCacheStats();
    </script>
  </body>
</html>
